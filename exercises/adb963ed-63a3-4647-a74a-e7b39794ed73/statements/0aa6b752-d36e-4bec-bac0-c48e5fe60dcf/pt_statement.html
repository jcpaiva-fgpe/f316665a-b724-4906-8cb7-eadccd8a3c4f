<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
  <head>
    <title>
      Balão à vista
    </title>
    <meta name="description" content="Balão à vista">
    <meta name="keywords" content="html">
    <meta name="resource-type" content="document">
    <meta name="distribution" content="global">
    <meta http-equiv="Content-Style-Type" content="text/css">
    </head>
  <body>
    <hr>
    <h1>
      <a name="SECTION00070000000000000000">Balão à vista</a>
    </h1>
    <p></p>
    <div align="center">
      <img width="126" height="158" align="bottom" border="0" src=
      "./robotics.jpg" alt="Image robotics">
    </div>
    <p></p>
    <p></p>
    <p>
      <br>
    </p>
    <p>
      Quem bloqueou as portas? Não foi um ET em estado de choque, mas
      <tt>TAKIOR</tt>, robot inteligente especialmente programado para pôr
      termo a feriados, festas e balões. Como podia o décimo aniversário do
      ToPAS lhe escapar? Rapidamente se pôs a caminho do Departamento em festa,
      sem perder um minuto a estudar a planta do amplo edíficio, tendo apenas
      as coordenadas da porta de entrada. À entrada, pareceu-lhe um labirinto.
      Por isso, decidiu adoptar um algoritmo simples, mas arriscado.
      Percorreria laboratórios, anfiteatros, gabinetes, salas e afins, sem se
      afastar das paredes. Bloquearia as portas por onde tivesse de passar,
      evitando andar as voltas e parecer uma cigarra tonta. Confiscaria os
      balões que encontrasse, que utilizaria para levantar voo quando saisse.
    </p>
    <p>
      Recapitulando, <tt>TAKIOR</tt> deve percorrer todos os compartimentos que
      conseguir. Quando entra num compartimento, deve bloquear a porta por onde
      entrou. Depois, sem se afastar da parede, percorre o compartimento e
      recolhe os balões que encontra junto da parede (supomos que as portas não
      bloqueadas estão encostadas e funcionam como paredes nesta pesquisa). A
      seguir procura a porta não bloqueada. Se existir, abre-a para passar ao
      compartimento vizinho ou abandonar o edíficio se essa porta for a de
      saída. Se o compartimento só tiver uma porta (a que bloqueou quando
      entrou), aguarda pacientemente que o encontrem agarrado aos balões que
      pretendia confiscar. Se sair do edíficio, levanta imediatamente voo. Terá
      sempre confiscado pelo menos um balão.
    </p>
    <p>
      <tt>TAKIOR</tt> parece um boneco de corda, mas, de facto, esse
      dispositivo lateral tem os sensores que lhe permitem manter o contacto
      com as paredes e voltar orientar-se quando entra num compartimento novo.
      Assim, quando entra numa sala, <b>vira sempre à sua direita</b>, ficando
      o sensor direccionado para a parede que tem à sua direira. Manterá esta
      condição durante o movimento no compartimento.
    </p>
    <p></p>
    <h2>
      <a name="SECTION00071000000000000000">Tarefa</a>
    </h2>Escrever um programa para analisar um cenário virtual, e determinar o
    número de balões que <tt>TAKIOR</tt> confiscou ou pretendia confiscar, e
    detectar ainda se ficou preso no edíficio ou levantou voo. Cada cenário é
    composto por uma planta do edíficio, representada por uma grelha
    rectangular, com identificação das posições das paredes e das portas, bem
    como das posições que contêm balões. Não há balões atrás de portas.
    <b>Todos os compartimentos são rectangulares e têm ou uma ou duas portas.
    Não há portas junto aos cantos</b>. O compartimento de entrada tem sempre
    duas portas e só uma delas dá acesso ao exterior. Existe pelo menos uma
    porta de saída para o exterior num outro compartimento.
    <p>
      Na primeira linha de dados tem dois inteiros <em>m</em> e <em>n</em>,
      menores do que 100, e que representam o número de linhas e de colunas da
      grelha. Seguem-se <em>m</em> linhas. Cada uma contém uma sequência de
      <em>n</em> carateres, formada por <tt>'E'</tt> (porta de entrada),
      <tt>'S'</tt> (porta de saída), <tt>'P'</tt> (porta interior),
      <tt>'X'</tt> (parede), <tt>'B'</tt> (balão), ou espaços <tt>' '</tt>. No
      ínicio e fim de cada linha pode ter <tt>'X'</tt>, <tt>'S'</tt> ou
      <tt>'E'</tt>, existindo apenas um <tt>'S'</tt> e <tt>'E'</tt> no cenário.
      Pode supor que a porta de entrada se encontra sempre na <b>célula
      (0,2)</b>, junto ao canto inferior esquerdo da grelha.
    </p>
    <p>
      O resultado é composto por duas linhas: na primeira tem o número de
      balões recolhidos; a segunda tem a frase ``<tt>Levantou voo</tt>'' ou
      ``<tt>Veio para ficar</tt>'', conforme <tt>TAKIOR</tt> tenha ou não
      conseguido sair do edíficio.
    </p>
    <p></p>
    <p></p>
    <p>
      <br>
    </p>
    <p></p>
    <h2>
      <a name="SECTION00072000000000000000">Exemplo 1</a>
    </h2>
    <h3>
      <a name="SECTION00072100000000000000">Input</a>
    </h3>
    <pre>
18 20
XXXXXXXXXXXXXXXXXXXX
X      X           X
X   B  X           X
X      XXPXXXXXXXXXX
X      X    X      X
X     BX    X    B S
X      P    X      X
X      X    XXPXXXXX
X      XXXXXX      X
X      X    X      X
X      X    P      X
X      X    X      X
XXXXPXXXXXXXXXXXXXXX
X                 BX
X       B          X
X       B          X
X             B    X
XXEXXXXXXXXXXXXXXXXX
</pre>
    <p></p>
    <h3>
      <a name="SECTION00072200000000000000">Output</a>
    </h3>
    <pre>
3
Veio para ficar
</pre>
    <p></p>
    <h2>
      <a name="SECTION00073000000000000000">Exemplo 2</a>
    </h2>
    <h3>
      <a name="SECTION00073100000000000000">Input</a>
    </h3>
    <p></p>
    <pre>
14 23
XXXXXXXXXXXXXXXXXXXXXXX
X         X           X
X   B     X    B      X
X         X        B  S
X      B  XB          X
X  B      XXXXXXXPXXXXX
X         X           X
X     B   X   B     B X
X         XXXXXXXXXPXXX
X         X     X     X
X         P     P     X
X    B    X B   X    BX
X         X     X     X
XXEXXXXXXXXXXXXXXXXXXXX
</pre>
    <p></p>
    <h3>
      <a name="SECTION00073200000000000000">Output</a>
    </h3>
    <pre>
4
Levantou voo
</pre>
    <p>
      <br>
    </p>
  </body>
</html>
